/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// node_modules/obsidian-dataview/lib/index.js
var require_lib = __commonJS({
  "node_modules/obsidian-dataview/lib/index.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    require("obsidian");
    var getAPI3 = (app) => {
      var _a;
      if (app)
        return (_a = app.plugins.plugins.dataview) === null || _a === void 0 ? void 0 : _a.api;
      else
        return window.DataviewAPI;
    };
    var isPluginEnabled = (app) => app.plugins.enabledPlugins.has("dataview");
    exports.getAPI = getAPI3;
    exports.isPluginEnabled = isPluginEnabled;
  }
});

// node_modules/node-fetch/browser.js
var require_browser = __commonJS({
  "node_modules/node-fetch/browser.js"(exports, module2) {
    "use strict";
    var getGlobal = function() {
      if (typeof self !== "undefined") {
        return self;
      }
      if (typeof window !== "undefined") {
        return window;
      }
      if (typeof global !== "undefined") {
        return global;
      }
      throw new Error("unable to locate global object");
    };
    var global = getGlobal();
    module2.exports = exports = global.fetch;
    if (global.fetch) {
      exports.default = global.fetch.bind(global);
    }
    exports.Headers = global.Headers;
    exports.Request = global.Request;
    exports.Response = global.Response;
  }
});

// main.ts
__export(exports, {
  default: () => FileCookerPlugin
});
var import_obsidian22 = __toModule(require("obsidian"));

// src/modal/choose-folder-modal.ts
var import_obsidian = __toModule(require("obsidian"));
var ChooseFolderModal = class extends import_obsidian.SuggestModal {
  constructor(app, readable, actionFunc) {
    super(app);
    this.readable = readable;
    this.actionFunc = actionFunc;
  }
  getSuggestions(query) {
    const abstractFiles = this.app.vault.getAllLoadedFiles();
    const folders = [];
    const lowerCaseInputStr = query.toLowerCase();
    abstractFiles.forEach((folder) => {
      if (folder instanceof import_obsidian.TFolder && folder.path.toLowerCase().contains(lowerCaseInputStr)) {
        folders.push(folder);
      }
    });
    return folders;
  }
  renderSuggestion(folder, el) {
    el.createEl("div", { text: folder.path });
  }
  onChooseSuggestion(folder, evt) {
    let action = this.actionFunc(folder.path);
    this.readable.read(action);
  }
};

// src/reader/clipboard-reader.ts
var import_obsidian2 = __toModule(require("obsidian"));

// src/reader/read-info.ts
var ReadInfo = class {
  constructor(limit = 300) {
    this.limit = limit;
    this.resultArr = [];
  }
  add(file) {
    if (this.resultArr.length >= this.limit) {
      throw new Error("Load more than " + this.limit + " files!");
    }
    this.resultArr.push(file);
  }
  getFiles() {
    return this.resultArr;
  }
};

// src/reader/clipboard-reader.ts
var ClipboardReader = class {
  constructor(app) {
    this.app = app;
  }
  read(action) {
    let readInfo = new ReadInfo();
    let promiseStr = navigator.clipboard.readText();
    promiseStr.then((str) => {
      let lines = str.split("\n");
      try {
        lines.forEach((line) => {
          let f = line;
          if (f.startsWith("[[")) {
            f = f.substring(2, f.length);
          }
          if (f.endsWith("]]")) {
            f = f.substring(0, f.length - 2);
          }
          if (!f.endsWith(".md") && !f.endsWith(".MD") && !f.endsWith(".Md") && !f.endsWith(".mD")) {
            f = f + ".md";
          }
          let ff = this.app.vault.getAbstractFileByPath(f);
          if (ff != null) {
            readInfo.add(ff);
          }
        });
        action.act(readInfo.getFiles());
      } catch (e) {
        new import_obsidian2.Notice(e.message);
      }
    }).catch((e) => {
      new import_obsidian2.Notice("Clipboard Content Error!" + e);
    });
  }
};

// src/action/delete-action.ts
var import_obsidian4 = __toModule(require("obsidian"));

// src/modal/delete-confirm-modal.ts
var import_obsidian3 = __toModule(require("obsidian"));
var DeleteConfirmModal = class extends import_obsidian3.Modal {
  constructor(app, resultArr) {
    super(app);
    this.resultArr = resultArr;
  }
  onOpen() {
    return __async(this, null, function* () {
      const { contentEl } = this;
      contentEl.createEl("h1", { text: "Confirm Delete?" });
      if (this.resultArr.length == 0) {
        contentEl.createEl("div", { text: "No files found!" });
        new import_obsidian3.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
          this.close();
        }));
      } else {
        this.resultArr.forEach((info) => {
          contentEl.createEl("div", { text: info.path });
        });
        new import_obsidian3.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => {
          this.close();
          this.resultArr.forEach((info) => {
            this.app.vault.trash(info, true);
          });
          new import_obsidian3.Notice("Delete Success!");
        })).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
          this.close();
          new import_obsidian3.Notice("Delete Canceled!");
        }));
      }
    });
  }
};

// src/action/delete-action.ts
var DeleteAction = class {
  constructor(app) {
    this.app = app;
  }
  act(resultArr) {
    if (resultArr.length > 0) {
      new DeleteConfirmModal(this.app, resultArr).open();
    } else {
      new import_obsidian4.Notice("No Files Found!");
    }
  }
};

// src/reader/current-file-reader.ts
var import_obsidian5 = __toModule(require("obsidian"));
var CurrentFileReader = class {
  constructor(app, unResolvedFlag) {
    this.unResolvedFlag = false;
    this.app = app;
    this.unResolvedFlag = unResolvedFlag;
  }
  read(action) {
    let readInfo = new ReadInfo();
    let currentFile = this.app.workspace.getActiveFile();
    if (currentFile == null) {
      new import_obsidian5.Notice("No active file!");
      return;
    }
    let currentFilePath = currentFile.path;
    let linkObj;
    if (!this.unResolvedFlag) {
      linkObj = this.app.metadataCache.resolvedLinks[currentFilePath];
    } else {
      linkObj = this.app.metadataCache.unresolvedLinks[currentFilePath];
    }
    try {
      if (!this.unResolvedFlag) {
        for (let key in linkObj) {
          let ff = this.app.vault.getAbstractFileByPath(key);
          if (ff != null) {
            readInfo.add(ff);
          }
        }
      } else {
        for (let key in linkObj) {
          let ff = new VirtualFile(key);
          readInfo.add(ff);
        }
      }
      action.act(readInfo.getFiles());
    } catch (e) {
      new import_obsidian5.Notice(e.message);
    }
  }
};
var VirtualFile = class {
  constructor(path) {
    let idx = path.lastIndexOf("/");
    if (!path.endsWith(".md")) {
      path = path + ".md";
    }
    this.path = path;
    if (idx >= 0) {
      this.name = path.substring(idx, path.length);
    } else {
      this.name = path;
    }
  }
};

// src/reader/dataview-reader.ts
var import_obsidian6 = __toModule(require("obsidian"));
var import_obsidian_dataview = __toModule(require_lib());
var DataviewReader = class {
  constructor(app, queryStr) {
    this.app = app;
    this.queryStr = queryStr;
  }
  read(action) {
    let readInfo = new ReadInfo();
    let api = (0, import_obsidian_dataview.getAPI)();
    let qStr = formatStr(this.queryStr);
    api.query(qStr).then((res) => {
      if (res.successful) {
        let filePaths = [];
        if (res.value.type == "list") {
          res.value.values.forEach((it) => {
            filePaths.push(it.path);
          });
        } else if (res.value.type == "table") {
          filePaths = res.value.values;
          res.value.values.forEach((it) => {
            it.forEach((innerIt) => {
              if (innerIt && innerIt.path) {
                filePaths.push(innerIt.path);
                return;
              }
            });
          });
        } else {
          res.value.values.forEach((it) => {
            filePaths.push(it.link.path);
          });
        }
        try {
          filePaths.forEach((filePath) => {
            let ff = this.app.vault.getAbstractFileByPath(filePath.toString());
            if (ff != null) {
              readInfo.add(ff);
            }
          });
          action.act(readInfo.getFiles());
        } catch (e) {
          new import_obsidian6.Notice(e.message);
        }
      } else {
        new import_obsidian6.Notice("Query string error![" + this.queryStr + "]");
      }
    });
  }
};
function formatStr(queryStr) {
  let str = queryStr.trimStart();
  let commandStr = str.substring(0, 4);
  if (commandStr.toUpperCase() == "LIST") {
    return "LIST" + str.substring(4, str.length);
  }
  if (commandStr.toUpperCase() == "TABL") {
    return "TABLE" + str.substring(5, str.length);
  }
  if (commandStr.toUpperCase() == "TASK") {
    return "TASK" + str.substring(4, str.length);
  }
  return queryStr;
}

// src/action/copy-action.ts
var import_obsidian7 = __toModule(require("obsidian"));
var CopyAction = class {
  constructor(app) {
    this.app = app;
  }
  act(resultArr) {
    if (resultArr.length > 0) {
      let str = "";
      resultArr.forEach((ff) => {
        let name = ff.name;
        if (name.endsWith(".md")) {
          name = name.substring(0, name.lastIndexOf("."));
        }
        str += "[[" + ff.path + "|" + name + "]]\n";
      });
      navigator.clipboard.writeText(str);
      new import_obsidian7.Notice("Copy links success!");
    } else {
      new import_obsidian7.Notice("No Files Found!");
    }
  }
};

// main.ts
var import_obsidian_dataview2 = __toModule(require_lib());

// src/action/edit-front-matter-action.ts
var import_obsidian9 = __toModule(require("obsidian"));

// src/modal/edit-front-matter-modal.ts
var import_obsidian8 = __toModule(require("obsidian"));
var EditFrontMatterModal = class extends import_obsidian8.Modal {
  constructor(app, resultArr) {
    super(app);
    this.resultArr = resultArr;
    let tmpFlag = localStorage.getItem("overrideFlag");
    if (tmpFlag && tmpFlag == "true") {
      this.overrideFlag = true;
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Edit Front Matter" });
    if (this.resultArr.length == 0) {
      contentEl.createEl("div", { text: "No files found!" });
      new import_obsidian8.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
        this.close();
      }));
    } else {
      this.resultArr.forEach((info) => {
        contentEl.createEl("div", { text: info.path });
      });
      new import_obsidian8.Setting(contentEl).addText((txt) => txt.setPlaceholder("Front Matter Key").onChange((val) => {
        this.key = val;
      })).addText((txt) => txt.setPlaceholder("Front Matter Value").onChange((val) => {
        this.val = val;
      })).addToggle((toggle) => {
        toggle.setValue(this.overrideFlag);
        toggle.setTooltip("Override if exists!");
        toggle.onChange((val) => {
          localStorage.setItem("overrideFlag", val + "");
          this.overrideFlag = val;
        });
      });
      new import_obsidian8.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
        if (this.key == null || this.key.trim() == "") {
          new import_obsidian8.Notice("Key could not be empty!");
          return;
        }
        if (this.val == null || this.val.trim() == "") {
          new import_obsidian8.Notice("Value could not be empty!");
          return;
        }
        this.close();
        let api = this.app.plugins.plugins["metaedit"].api;
        let c_num = 0;
        let u_num = 0;
        for (let i = 0; i < this.resultArr.length; i++) {
          let info = this.resultArr[i];
          let val = yield api.getPropertyValue(this.key, info);
          if (val == null) {
            api.createYamlProperty(this.key, this.val, info);
            c_num += 1;
          } else if (this.overrideFlag || val.trim() == "") {
            api.update(this.key, this.val, info);
            u_num += 1;
          }
        }
        new import_obsidian8.Notice("Edit Success!");
        new import_obsidian8.Notice("Add " + c_num + " !");
        new import_obsidian8.Notice("Update " + u_num + " !");
      }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
        this.close();
        new import_obsidian8.Notice("Edit Canceled!");
      }));
    }
  }
};

// src/action/edit-front-matter-action.ts
var EditFrontMatterAction = class {
  constructor(app) {
    this.app = app;
  }
  act(resultArr) {
    if (resultArr.length > 0) {
      new EditFrontMatterModal(this.app, resultArr).open();
    } else {
      new import_obsidian9.Notice("No Files Found!");
    }
  }
};

// src/action/rename-action.ts
var import_obsidian12 = __toModule(require("obsidian"));

// src/modal/rename-modal.ts
var import_obsidian11 = __toModule(require("obsidian"));

// src/modal/rename-confirm-modal.ts
var import_obsidian10 = __toModule(require("obsidian"));
var RenameConfirmModal = class extends import_obsidian10.Modal {
  constructor(app, resultArr, prefix, suffix) {
    super(app);
    this.resultArr = resultArr;
    this.prefix = prefix;
    this.suffix = suffix;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Rename Files" });
    this.resultArr.forEach((info) => {
      let name = this.newName(info.name);
      contentEl.createEl("div", { text: info.name + "->" + name });
    });
    new import_obsidian10.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      if ((this.prefix == null || this.prefix.trim() == "") && (this.suffix == null || this.suffix.trim() == "")) {
        new import_obsidian10.Notice("Prefix and Suffix could not be all empty!");
        return;
      }
      this.close();
      for (let i = 0; i < this.resultArr.length; i++) {
        let info = this.resultArr[i];
        let name = this.newName(info.name);
        yield this.app.fileManager.renameFile(info, info.parent.path + "/" + name);
      }
      new import_obsidian10.Notice("Rename Success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian10.Notice("Rename Canceled!");
    }));
  }
  newName(name) {
    let tName = name + "";
    let suf = "";
    if (tName.endsWith(".md")) {
      tName = tName.replace(".md", "");
      suf = ".md";
    }
    if (this.prefix.startsWith("-")) {
      let t = this.prefix.substring(1, this.prefix.length);
      if (tName.startsWith(t)) {
        tName = tName.substring(t.length, tName.length);
      }
    } else {
      tName = this.prefix + tName;
    }
    if (this.suffix.startsWith("-")) {
      let t = this.suffix.substring(1, this.suffix.length);
      if (tName.endsWith(t)) {
        tName = tName.substring(0, tName.length - t.length);
      }
    } else {
      tName = tName + this.suffix;
    }
    return tName + suf;
  }
};

// src/modal/rename-modal.ts
var RenameModal = class extends import_obsidian11.Modal {
  constructor(app, resultArr) {
    super(app);
    this.resultArr = resultArr;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Rename Files" });
    if (this.resultArr.length == 0) {
      contentEl.createEl("div", { text: "No files found!" });
      new import_obsidian11.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
        this.close();
      }));
    } else {
      this.resultArr.forEach((info) => {
        contentEl.createEl("div", { text: info.path });
      });
      new import_obsidian11.Setting(contentEl).addText((txt) => txt.setPlaceholder("Prefix").onChange((val) => {
        this.prefix = val;
      })).addText((txt) => txt.setPlaceholder("Suffix").onChange((val) => {
        this.suffix = val;
      }));
      new import_obsidian11.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
        if ((this.prefix == null || this.prefix.trim() == "") && (this.suffix == null || this.suffix.trim() == "")) {
          new import_obsidian11.Notice("Prefix and Suffix could not be all empty!");
          return;
        }
        this.close();
        new RenameConfirmModal(this.app, this.resultArr, this.prefix, this.suffix).open();
      }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
        this.close();
        new import_obsidian11.Notice("Rename Canceled!");
      }));
    }
  }
};

// src/action/rename-action.ts
var RenameAction = class {
  constructor(app) {
    this.app = app;
  }
  act(resultArr) {
    if (resultArr.length > 0) {
      new RenameModal(this.app, resultArr).open();
    } else {
      new import_obsidian12.Notice("No Files Found!");
    }
  }
};

// src/modal/choose-file-modal.ts
var import_obsidian15 = __toModule(require("obsidian"));

// src/action/merge-action.ts
var import_obsidian14 = __toModule(require("obsidian"));

// src/modal/merge-confirm-modal.ts
var import_obsidian13 = __toModule(require("obsidian"));
var MergeConfirmModal = class extends import_obsidian13.Modal {
  constructor(app, resultArr, targetFilePath) {
    super(app);
    this.targetFilePath = targetFilePath;
    this.resultArr = resultArr;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Merge?" });
    contentEl.createEl("div", { text: "Merge all files below -> " + this.targetFilePath + " !" });
    this.resultArr.forEach((info) => {
      contentEl.createEl("div", { text: info.path });
    });
    new import_obsidian13.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      let targetFile = this.app.vault.getAbstractFileByPath(this.targetFilePath);
      if (targetFile == null) {
        targetFile = yield this.app.vault.create(this.targetFilePath, "");
      }
      for (const key in this.resultArr) {
        let info = this.resultArr[key];
        let cont = yield this.app.vault.read(info);
        yield this.app.vault.append(targetFile, cont);
      }
      new import_obsidian13.Notice("Merge Success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian13.Notice("Merge Canceled!");
    }));
  }
};

// src/action/merge-action.ts
var MergeAction = class {
  constructor(app, targetFilePath) {
    this.app = app;
    this.targetFilePath = targetFilePath;
  }
  act(resultArr) {
    return __async(this, null, function* () {
      if (resultArr.length > 0) {
        new MergeConfirmModal(this.app, resultArr, this.targetFilePath).open();
      } else {
        new import_obsidian14.Notice("No Files Found!");
      }
    });
  }
};

// src/modal/choose-file-modal.ts
var ChooseFileModal = class extends import_obsidian15.SuggestModal {
  constructor(app, readable) {
    super(app);
    this.readable = readable;
  }
  getSuggestions(query) {
    const abstractFiles = this.app.vault.getAllLoadedFiles();
    const files = [];
    const lowerCaseInputStr = query.toLowerCase();
    abstractFiles.forEach((file) => {
      if (file instanceof import_obsidian15.TFile && file.path.toLowerCase().contains(lowerCaseInputStr)) {
        files.push(file.path);
      }
    });
    if (files.length == 0) {
      if (query.endsWith(".md")) {
        files.push(query);
      } else {
        files.push(query + ".md");
      }
    }
    return files;
  }
  renderSuggestion(filePath, el) {
    el.createEl("div", { text: filePath });
  }
  onChooseSuggestion(file, evt) {
    let action = new MergeAction(this.app, file);
    this.readable.read(action);
  }
};

// src/action/move-action.ts
var import_obsidian17 = __toModule(require("obsidian"));

// src/modal/move-confirm-modal.ts
var import_obsidian16 = __toModule(require("obsidian"));
var MoveConfirmModal = class extends import_obsidian16.Modal {
  constructor(app, moveInfos) {
    super(app);
    this.moveInfos = moveInfos;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Move/Copy?" });
    this.moveInfos.forEach((info) => {
      contentEl.createEl("div", { text: info.sourceFile.path + " -> " + info.targetDir + "/" + info.sourceFile.name });
    });
    new import_obsidian16.Setting(contentEl).addToggle((toggle) => {
      toggle.setTooltip("Copy instead!");
      toggle.onChange((val) => {
        this.copyFlag = val;
      });
    });
    new import_obsidian16.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      if (this.copyFlag) {
        for (const key in this.moveInfos) {
          let info = this.moveInfos[key];
          yield this.app.vault.copy(info.sourceFile, info.targetDir + "/" + info.sourceFile.name);
        }
        new import_obsidian16.Notice("Copy Success!");
      } else {
        for (const key in this.moveInfos) {
          let info = this.moveInfos[key];
          yield this.app.fileManager.renameFile(info.sourceFile, info.targetDir + "/" + info.sourceFile.name);
        }
        new import_obsidian16.Notice("Move Success!");
      }
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian16.Notice("Move Canceled!");
    }));
  }
};

// src/action/move-action.ts
var MoveAction = class {
  constructor(app, targetPath) {
    this.app = app;
    this.targetPath = targetPath;
  }
  act(resultArr) {
    const moveInfos = [];
    if (resultArr.length > 0) {
      resultArr.forEach((ff) => {
        moveInfos.push({
          sourceFile: ff,
          targetDir: this.targetPath
        });
      });
      new MoveConfirmModal(this.app, moveInfos).open();
    } else {
      new import_obsidian17.Notice("No Files Found!");
    }
  }
};

// src/action/create-action.ts
var import_obsidian19 = __toModule(require("obsidian"));

// src/modal/create-confirm-modal.ts
var import_obsidian18 = __toModule(require("obsidian"));
var CreateConfirmModal = class extends import_obsidian18.Modal {
  constructor(app, moveInfos) {
    super(app);
    this.moveInfos = moveInfos;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Create?" });
    this.moveInfos.forEach((info) => {
      contentEl.createEl("div", { text: info.targetDir + "/" + info.sourceFile.name });
    });
    new import_obsidian18.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      for (const key in this.moveInfos) {
        let info = this.moveInfos[key];
        yield this.app.vault.create(info.targetDir + "/" + info.sourceFile.name, "");
      }
      new import_obsidian18.Notice("Create Success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian18.Notice("Create Canceled!");
    }));
  }
};

// src/action/create-action.ts
var CreateAction = class {
  constructor(app, targetPath) {
    this.app = app;
    this.targetPath = targetPath;
  }
  act(resultArr) {
    const moveInfos = [];
    if (resultArr.length > 0) {
      resultArr.forEach((ff) => {
        moveInfos.push({
          sourceFile: ff,
          targetDir: this.targetPath
        });
      });
      new CreateConfirmModal(this.app, moveInfos).open();
    } else {
      new import_obsidian19.Notice("No Files Found!");
    }
  }
};

// src/action/sync-flomo-action.ts
var import_obsidian21 = __toModule(require("obsidian"));

// src/modal/sync-flomo-confirm-modal.ts
var import_obsidian20 = __toModule(require("obsidian"));
var import_node_fetch = __toModule(require_browser());
var SyncFlomoConfirmModal = class extends import_obsidian20.Modal {
  constructor(plugin, resultArr) {
    super(plugin.app);
    this.plugin = plugin;
    this.resultArr = resultArr;
  }
  onOpen() {
    return __async(this, null, function* () {
      const { contentEl } = this;
      contentEl.createEl("h1", { text: "Confirm Sync to flomo?" });
      if (this.resultArr.length == 0) {
        contentEl.createEl("div", { text: "No files found!" });
        new import_obsidian20.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
          this.close();
        }));
      } else {
        this.resultArr.forEach((info) => {
          contentEl.createEl("div", { text: info.path });
        });
        new import_obsidian20.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
          this.close();
          for (let i = 0; i < this.resultArr.length; i++) {
            let info = this.resultArr[i];
            let cont = yield this.app.vault.read(info);
            const response = yield (0, import_node_fetch.default)(this.plugin.settings.flomoAPI, {
              method: "POST",
              body: JSON.stringify({
                content: cont
              }),
              headers: {
                "Content-Type": "application/json",
                Accept: "application/json"
              }
            });
            if (!response.ok) {
              new import_obsidian20.Notice(`Sync to flomo Error!${response.text}[${response.status}]`);
              return;
            }
          }
          new import_obsidian20.Notice("Sync to flomo Success!");
        }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
          this.close();
          new import_obsidian20.Notice("Sync to flomo Canceled!");
        }));
      }
    });
  }
};

// src/action/sync-flomo-action.ts
var SyncFlomoAction = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  act(resultArr) {
    let flomoAPI = this.plugin.settings.flomoAPI;
    if (!flomoAPI || flomoAPI.trim() == "") {
      new import_obsidian21.Notice("Please config flomoAPI first!");
      return;
    }
    if (resultArr.length > 0) {
      new SyncFlomoConfirmModal(this.plugin, resultArr).open();
    } else {
      new import_obsidian21.Notice("No Files Found!");
    }
  }
};

// main.ts
var FileCookerPlugin = class extends import_obsidian22.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      let dataviewApi = (0, import_obsidian_dataview2.getAPI)();
      this.addCommand({
        id: "move-files-to",
        name: "Move files to ...",
        callback: () => {
          let actionFunc = (path) => {
            return new MoveAction(this.app, path);
          };
          new ChooseFolderModal(this.app, new ClipboardReader(this.app), actionFunc).open();
        }
      });
      this.addCommand({
        id: "move-links-to",
        name: "Move links in current file to ...",
        callback: () => {
          let actionFunc = (path) => {
            return new MoveAction(this.app, path);
          };
          new ChooseFolderModal(this.app, new CurrentFileReader(this.app), actionFunc).open();
        }
      });
      this.addCommand({
        id: "move-dataview-results-to",
        name: "Move dataview query results to ...",
        editorCheckCallback: (checking, editor, view) => {
          if (!checking) {
            let actionFunc = (path) => {
              return new MoveAction(this.app, path);
            };
            new ChooseFolderModal(this.app, new DataviewReader(this.app, editor.getSelection()), actionFunc).open();
          }
          return dataviewApi != null;
        }
      });
      this.addCommand({
        id: "sync-files-to-flomo",
        name: "Sync files to flomo ...",
        callback: () => {
          new ClipboardReader(this.app).read(new SyncFlomoAction(this));
        }
      });
      this.addCommand({
        id: "sync-links-to",
        name: "Sync links in current file to flomo ...",
        callback: () => {
          new CurrentFileReader(this.app).read(new SyncFlomoAction(this));
        }
      });
      this.addCommand({
        id: "sync-dataview-results-to",
        name: "Sync dataview query results to flomo ...",
        editorCheckCallback: (checking, editor, view) => {
          if (!checking) {
            new DataviewReader(this.app, editor.getSelection()).read(new SyncFlomoAction(this));
          }
          return dataviewApi != null;
        }
      });
      this.addCommand({
        id: "create-links",
        name: "Create links in current file ...",
        callback: () => {
          let actionFunc = (path) => {
            return new CreateAction(this.app, path);
          };
          new ChooseFolderModal(this.app, new CurrentFileReader(this.app, true), actionFunc).open();
        }
      });
      this.addCommand({
        id: "merge-files-to",
        name: "Merge files to ...",
        callback: () => {
          new ChooseFileModal(this.app, new ClipboardReader(this.app)).open();
        }
      });
      this.addCommand({
        id: "merge-links-to",
        name: "Merge links in current file to ...",
        callback: () => {
          new ChooseFileModal(this.app, new CurrentFileReader(this.app)).open();
        }
      });
      this.addCommand({
        id: "merge-dataview-results-to",
        name: "Merge dataview query results to ...",
        editorCheckCallback: (checking, editor, view) => {
          if (!checking) {
            new ChooseFileModal(this.app, new DataviewReader(this.app, editor.getSelection())).open();
          }
          return dataviewApi != null;
        }
      });
      this.addCommand({
        id: "delete-files-in-clipboard",
        name: "Delete files in clipboard!",
        callback: () => {
          new ClipboardReader(this.app).read(new DeleteAction(this.app));
        }
      });
      this.addCommand({
        id: "delete-links-in-current-file",
        name: "Delete link-files in current file!",
        callback: () => {
          new CurrentFileReader(this.app).read(new DeleteAction(this.app));
        }
      });
      this.addCommand({
        id: "delete-dataview-results",
        name: "Delete dataview query results!",
        editorCheckCallback: (checking, editor, view) => {
          if (!checking) {
            new DataviewReader(this.app, editor.getSelection()).read(new DeleteAction(this.app));
          }
          return dataviewApi != null;
        }
      });
      this.addCommand({
        id: "copy-dataview-result-links",
        name: "Copy dataview result links!",
        editorCheckCallback: (checking, editor, view) => {
          if (!checking) {
            new DataviewReader(this.app, editor.getSelection()).read(new CopyAction(this.app));
          }
          return dataviewApi != null;
        }
      });
      let metaedit = this.app.plugins.plugins["metaedit"];
      this.addCommand({
        id: "edit-front-matter-in-clipboard-files",
        name: "Edit Front Matter in clipboard files ...",
        checkCallback: (checking) => {
          if (!checking) {
            new ClipboardReader(this.app).read(new EditFrontMatterAction(this.app));
          }
          return metaedit != null;
        }
      });
      this.addCommand({
        id: "edit-front-matter-in-current-file-links",
        name: "Edit Front Matter in current file links ...",
        checkCallback: (checking) => {
          if (!checking) {
            new CurrentFileReader(this.app).read(new EditFrontMatterAction(this.app));
          }
          return metaedit != null;
        }
      });
      this.addCommand({
        id: "edit-front-matter-in-dataview-results",
        name: "Edit Front Matter in dataview results ...",
        editorCheckCallback: (checking, editor, view) => {
          if (!checking) {
            new DataviewReader(this.app, editor.getSelection()).read(new EditFrontMatterAction(this.app));
          }
          return dataviewApi != null && metaedit != null;
        }
      });
      this.addCommand({
        id: "rename-in-clipboard-files",
        name: "Rename in clipboard files ...",
        callback: () => {
          new ClipboardReader(this.app).read(new RenameAction(this.app));
        }
      });
      this.addCommand({
        id: "rename-in-current-file-links",
        name: "Rename in current file links ...",
        callback: () => {
          new CurrentFileReader(this.app).read(new RenameAction(this.app));
        }
      });
      this.addCommand({
        id: "rename-in-dataview-results",
        name: "Rename in dataview results ...",
        editorCheckCallback: (checking, editor, view) => {
          if (!checking) {
            new DataviewReader(this.app, editor.getSelection()).read(new RenameAction(this.app));
          }
          return dataviewApi != null;
        }
      });
      this.addSettingTab(new FileCookerSettingTab(this.app, this));
    });
  }
  onunload() {
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
var DEFAULT_SETTINGS = {
  flomoAPI: ""
};
var FileCookerSettingTab = class extends import_obsidian22.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for File Cooker!" });
    new import_obsidian22.Setting(containerEl).setName("flomoAPI").setDesc("config flomo API to sync notes").addText((text) => text.setPlaceholder("Enter flomo API").setValue(this.plugin.settings.flomoAPI).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.flomoAPI = value;
      yield this.plugin.saveSettings();
    })));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL29ic2lkaWFuLWRhdGF2aWV3L3NyYy9pbmRleC50cyIsICJub2RlX21vZHVsZXMvbm9kZS1mZXRjaC9icm93c2VyLmpzIiwgIm1haW4udHMiLCAic3JjL21vZGFsL2Nob29zZS1mb2xkZXItbW9kYWwudHMiLCAic3JjL3JlYWRlci9jbGlwYm9hcmQtcmVhZGVyLnRzIiwgInNyYy9yZWFkZXIvcmVhZC1pbmZvLnRzIiwgInNyYy9hY3Rpb24vZGVsZXRlLWFjdGlvbi50cyIsICJzcmMvbW9kYWwvZGVsZXRlLWNvbmZpcm0tbW9kYWwudHMiLCAic3JjL3JlYWRlci9jdXJyZW50LWZpbGUtcmVhZGVyLnRzIiwgInNyYy9yZWFkZXIvZGF0YXZpZXctcmVhZGVyLnRzIiwgInNyYy9hY3Rpb24vY29weS1hY3Rpb24udHMiLCAic3JjL2FjdGlvbi9lZGl0LWZyb250LW1hdHRlci1hY3Rpb24udHMiLCAic3JjL21vZGFsL2VkaXQtZnJvbnQtbWF0dGVyLW1vZGFsLnRzIiwgInNyYy9hY3Rpb24vcmVuYW1lLWFjdGlvbi50cyIsICJzcmMvbW9kYWwvcmVuYW1lLW1vZGFsLnRzIiwgInNyYy9tb2RhbC9yZW5hbWUtY29uZmlybS1tb2RhbC50cyIsICJzcmMvbW9kYWwvY2hvb3NlLWZpbGUtbW9kYWwudHMiLCAic3JjL2FjdGlvbi9tZXJnZS1hY3Rpb24udHMiLCAic3JjL21vZGFsL21lcmdlLWNvbmZpcm0tbW9kYWwudHMiLCAic3JjL2FjdGlvbi9tb3ZlLWFjdGlvbi50cyIsICJzcmMvbW9kYWwvbW92ZS1jb25maXJtLW1vZGFsLnRzIiwgInNyYy9hY3Rpb24vY3JlYXRlLWFjdGlvbi50cyIsICJzcmMvbW9kYWwvY3JlYXRlLWNvbmZpcm0tbW9kYWwudHMiLCAic3JjL2FjdGlvbi9zeW5jLWZsb21vLWFjdGlvbi50cyIsICJzcmMvbW9kYWwvc3luYy1mbG9tby1jb25maXJtLW1vZGFsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBCYXNpYyBBUEkgdHlwZS5cbmV4cG9ydCB0eXBlIHsgRGF0YXZpZXdBcGkgfSBmcm9tIFwiYXBpL3BsdWdpbi1hcGlcIjtcblxuLy8gQ29yZSBEYXRhdmlldyB0eXBlcy5cbmV4cG9ydCB0eXBlIHsgRGF0ZVRpbWUsIER1cmF0aW9uIH0gZnJvbSBcImx1eG9uXCI7XG5leHBvcnQgdHlwZSB7XG4gICAgTGluayxcbiAgICBEYXRhT2JqZWN0LFxuICAgIExpdGVyYWxUeXBlLFxuICAgIExpdGVyYWwsXG4gICAgTGl0ZXJhbFJlcHIsXG4gICAgV3JhcHBlZExpdGVyYWwsXG4gICAgTGl0ZXJhbFdyYXBwZXIsXG4gICAgV2lkZ2V0LFxufSBmcm9tIFwiZGF0YS1tb2RlbC92YWx1ZVwiO1xuXG5leHBvcnQgdHlwZSB7IFJlc3VsdCwgU3VjY2VzcywgRmFpbHVyZSB9IGZyb20gXCJhcGkvcmVzdWx0XCI7XG5leHBvcnQgdHlwZSB7IERhdGFBcnJheSB9IGZyb20gXCJhcGkvZGF0YS1hcnJheVwiO1xuXG4vLyBEYXRhdmlldyBJbmRleC5cbmV4cG9ydCB0eXBlIHsgTGlzdEl0ZW0sIFBhZ2VNZXRhZGF0YSB9IGZyb20gXCJkYXRhLW1vZGVsL21hcmtkb3duXCI7XG5leHBvcnQgdHlwZSB7IEZ1bGxJbmRleCwgUHJlZml4SW5kZXgsIEluZGV4TWFwIH0gZnJvbSBcImRhdGEtaW5kZXgvaW5kZXhcIjtcblxuLy8gU2VyaWFsaXplZCB0eXBlcyB3aGljaCBkZXNjcmliZSBhbGwgb3V0cHV0cyBvZiBzZXJpYWxpemF0aW9uLlxuZXhwb3J0IHR5cGUgeyBTTWFya2Rvd25QYWdlLCBTTGlzdEVudHJ5LCBTVGFzayB9IGZyb20gXCJkYXRhLW1vZGVsL3NlcmlhbGl6ZWQvbWFya2Rvd25cIjtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIEltcGxlbWVudGF0aW9uIC8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5pbXBvcnQgdHlwZSB7IERhdGF2aWV3QXBpIH0gZnJvbSBcImFwaS9wbHVnaW4tYXBpXCI7XG5cbmltcG9ydCBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgdHlwZSB7IEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG4vLyBVdGlsaXR5IGZ1bmN0aW9ucy5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IERhdGF2aWV3IEFQSSBmcm9tIHRoZSBhcHAgaWYgcHJvdmlkZWQ7IGlmIG5vdCwgaXQgaXMgaW5mZXJyZWQgZnJvbSB0aGUgZ2xvYmFsIEFQSSBvYmplY3QgaW5zdGFsbGVkXG4gKiBvbiB0aGUgd2luZG93LlxuICovXG5leHBvcnQgY29uc3QgZ2V0QVBJID0gKGFwcD86IEFwcCk6IERhdGF2aWV3QXBpIHwgdW5kZWZpbmVkID0+IHtcbiAgICBpZiAoYXBwKSByZXR1cm4gYXBwLnBsdWdpbnMucGx1Z2lucy5kYXRhdmlldz8uYXBpO1xuICAgIGVsc2UgcmV0dXJuIHdpbmRvdy5EYXRhdmlld0FQSTtcbn07XG5cbi8qKiBEZXRlcm1pbmUgaWYgRGF0YXZpZXcgaXMgZW5hYmxlZCBpbiB0aGUgZ2l2ZW4gYXBwbGljYXRpb24uICovXG5leHBvcnQgY29uc3QgaXNQbHVnaW5FbmFibGVkID0gKGFwcDogQXBwKSA9PiBhcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoXCJkYXRhdmlld1wiKTtcbiIsICJcInVzZSBzdHJpY3RcIjtcblxuLy8gcmVmOiBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1nbG9iYWxcbnZhciBnZXRHbG9iYWwgPSBmdW5jdGlvbiAoKSB7XG5cdC8vIHRoZSBvbmx5IHJlbGlhYmxlIG1lYW5zIHRvIGdldCB0aGUgZ2xvYmFsIG9iamVjdCBpc1xuXHQvLyBgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKWBcblx0Ly8gSG93ZXZlciwgdGhpcyBjYXVzZXMgQ1NQIHZpb2xhdGlvbnMgaW4gQ2hyb21lIGFwcHMuXG5cdGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIHNlbGY7IH1cblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7IHJldHVybiB3aW5kb3c7IH1cblx0aWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7IHJldHVybiBnbG9iYWw7IH1cblx0dGhyb3cgbmV3IEVycm9yKCd1bmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QnKTtcbn1cblxudmFyIGdsb2JhbCA9IGdldEdsb2JhbCgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBnbG9iYWwuZmV0Y2g7XG5cbi8vIE5lZWRlZCBmb3IgVHlwZVNjcmlwdCBhbmQgV2VicGFjay5cbmlmIChnbG9iYWwuZmV0Y2gpIHtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gZ2xvYmFsLmZldGNoLmJpbmQoZ2xvYmFsKTtcbn1cblxuZXhwb3J0cy5IZWFkZXJzID0gZ2xvYmFsLkhlYWRlcnM7XG5leHBvcnRzLlJlcXVlc3QgPSBnbG9iYWwuUmVxdWVzdDtcbmV4cG9ydHMuUmVzcG9uc2UgPSBnbG9iYWwuUmVzcG9uc2U7IiwgImltcG9ydCB7IFBsdWdpbiwgRWRpdG9yLCBNYXJrZG93blZpZXcsIEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IENob29zZUZvbGRlck1vZGFsIH0gZnJvbSAnc3JjL21vZGFsL2Nob29zZS1mb2xkZXItbW9kYWwnO1xuaW1wb3J0IHsgQ2xpcGJvYXJkUmVhZGVyIH0gZnJvbSAnc3JjL3JlYWRlci9jbGlwYm9hcmQtcmVhZGVyJztcbmltcG9ydCB7IERlbGV0ZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vZGVsZXRlLWFjdGlvbic7XG5pbXBvcnQgeyBDdXJyZW50RmlsZVJlYWRlciB9IGZyb20gJ3NyYy9yZWFkZXIvY3VycmVudC1maWxlLXJlYWRlcic7XG5pbXBvcnQgeyBEYXRhdmlld1JlYWRlciB9IGZyb20gJ3NyYy9yZWFkZXIvZGF0YXZpZXctcmVhZGVyJztcbmltcG9ydCB7IENvcHlBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2NvcHktYWN0aW9uJztcbmltcG9ydCB7IGdldEFQSSB9IGZyb20gXCJvYnNpZGlhbi1kYXRhdmlld1wiO1xuaW1wb3J0IHsgRWRpdEZyb250TWF0dGVyQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9lZGl0LWZyb250LW1hdHRlci1hY3Rpb24nO1xuaW1wb3J0IHsgUmVuYW1lQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9yZW5hbWUtYWN0aW9uJztcbmltcG9ydCB7IENob29zZUZpbGVNb2RhbCB9IGZyb20gJ3NyYy9tb2RhbC9jaG9vc2UtZmlsZS1tb2RhbCc7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2FjdGlvbic7XG5pbXBvcnQgeyBNb3ZlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9tb3ZlLWFjdGlvbic7XG5pbXBvcnQgeyBDcmVhdGVBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2NyZWF0ZS1hY3Rpb24nO1xuaW1wb3J0IHsgU3luY0Zsb21vQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9zeW5jLWZsb21vLWFjdGlvbic7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsZUNvb2tlclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBGaWxlQ29va2VyUGx1Z2luU2V0dGluZ3M7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdC8vIGNvbnN0IHJpYmJvbkljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbignY2xpcGJvYXJkLWxpc3QnLCAnTW92ZSBmaWxlcyB0byAuLi4nLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0Ly8gXHRuZXcgTW92ZU1vZGFsKHRoaXMuYXBwLCBGUk9NX0NMSVBCT0FSRCkub3BlbigpO1xuXHRcdC8vIH0pO1xuXHRcdC8vIHJpYmJvbkljb25FbC5hZGRDbGFzcygnbXktcGx1Z2luLXJpYmJvbi1jbGFzcycpO1xuXG5cdFx0bGV0IGRhdGF2aWV3QXBpID0gZ2V0QVBJKCk7XG5cblx0XHQvLyBNb3ZlIEZpbGVzXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnbW92ZS1maWxlcy10bycsXG5cdFx0XHRuYW1lOiAnTW92ZSBmaWxlcyB0byAuLi4nLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0bGV0IGFjdGlvbkZ1bmMgPSAocGF0aDogc3RyaW5nKTogQWN0aW9uID0+IHsgcmV0dXJuIG5ldyBNb3ZlQWN0aW9uKHRoaXMuYXBwLCBwYXRoKTsgfVxuXHRcdFx0XHRuZXcgQ2hvb3NlRm9sZGVyTW9kYWwodGhpcy5hcHAsIG5ldyBDbGlwYm9hcmRSZWFkZXIodGhpcy5hcHApLCBhY3Rpb25GdW5jKS5vcGVuKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwibW92ZS1saW5rcy10b1wiLFxuXHRcdFx0bmFtZTogXCJNb3ZlIGxpbmtzIGluIGN1cnJlbnQgZmlsZSB0byAuLi5cIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdGxldCBhY3Rpb25GdW5jID0gKHBhdGg6IHN0cmluZyk6IEFjdGlvbiA9PiB7IHJldHVybiBuZXcgTW92ZUFjdGlvbih0aGlzLmFwcCwgcGF0aCk7IH1cblx0XHRcdFx0bmV3IENob29zZUZvbGRlck1vZGFsKHRoaXMuYXBwLCBuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5hcHApLCBhY3Rpb25GdW5jKS5vcGVuKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdtb3ZlLWRhdGF2aWV3LXJlc3VsdHMtdG8nLFxuXHRcdFx0bmFtZTogJ01vdmUgZGF0YXZpZXcgcXVlcnkgcmVzdWx0cyB0byAuLi4nLFxuXHRcdFx0ZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcblx0XHRcdFx0XHRsZXQgYWN0aW9uRnVuYyA9IChwYXRoOiBzdHJpbmcpOiBBY3Rpb24gPT4geyByZXR1cm4gbmV3IE1vdmVBY3Rpb24odGhpcy5hcHAsIHBhdGgpOyB9XG5cdFx0XHRcdFx0bmV3IENob29zZUZvbGRlck1vZGFsKHRoaXMuYXBwLCBuZXcgRGF0YXZpZXdSZWFkZXIodGhpcy5hcHAsIGVkaXRvci5nZXRTZWxlY3Rpb24oKSksIGFjdGlvbkZ1bmMpLm9wZW4oKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbDtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIFN5bmMgRmlsZXMgdG8gZmxvbW9cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdzeW5jLWZpbGVzLXRvLWZsb21vJyxcblx0XHRcdG5hbWU6ICdTeW5jIGZpbGVzIHRvIGZsb21vIC4uLicsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRuZXcgQ2xpcGJvYXJkUmVhZGVyKHRoaXMuYXBwKS5yZWFkKG5ldyBTeW5jRmxvbW9BY3Rpb24odGhpcykpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcInN5bmMtbGlua3MtdG9cIixcblx0XHRcdG5hbWU6IFwiU3luYyBsaW5rcyBpbiBjdXJyZW50IGZpbGUgdG8gZmxvbW8gLi4uXCIsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5hcHApLnJlYWQobmV3IFN5bmNGbG9tb0FjdGlvbih0aGlzKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdzeW5jLWRhdGF2aWV3LXJlc3VsdHMtdG8nLFxuXHRcdFx0bmFtZTogJ1N5bmMgZGF0YXZpZXcgcXVlcnkgcmVzdWx0cyB0byBmbG9tbyAuLi4nLFxuXHRcdFx0ZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcblx0XHRcdFx0XHRuZXcgRGF0YXZpZXdSZWFkZXIodGhpcy5hcHAsIGVkaXRvci5nZXRTZWxlY3Rpb24oKSkucmVhZChuZXcgU3luY0Zsb21vQWN0aW9uKHRoaXMpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbDtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIENyZWF0ZSBGaWxlc1xuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJjcmVhdGUtbGlua3NcIixcblx0XHRcdG5hbWU6IFwiQ3JlYXRlIGxpbmtzIGluIGN1cnJlbnQgZmlsZSAuLi5cIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdGxldCBhY3Rpb25GdW5jID0gKHBhdGg6IHN0cmluZyk6IEFjdGlvbiA9PiB7IHJldHVybiBuZXcgQ3JlYXRlQWN0aW9uKHRoaXMuYXBwLCBwYXRoKTsgfVxuXHRcdFx0XHRuZXcgQ2hvb3NlRm9sZGVyTW9kYWwodGhpcy5hcHAsIG5ldyBDdXJyZW50RmlsZVJlYWRlcih0aGlzLmFwcCwgdHJ1ZSksIGFjdGlvbkZ1bmMpLm9wZW4oKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIE1lcmdlIEZpbGVzXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnbWVyZ2UtZmlsZXMtdG8nLFxuXHRcdFx0bmFtZTogJ01lcmdlIGZpbGVzIHRvIC4uLicsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRuZXcgQ2hvb3NlRmlsZU1vZGFsKHRoaXMuYXBwLCBuZXcgQ2xpcGJvYXJkUmVhZGVyKHRoaXMuYXBwKSkub3BlbigpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcIm1lcmdlLWxpbmtzLXRvXCIsXG5cdFx0XHRuYW1lOiBcIk1lcmdlIGxpbmtzIGluIGN1cnJlbnQgZmlsZSB0byAuLi5cIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG5ldyBDaG9vc2VGaWxlTW9kYWwodGhpcy5hcHAsIG5ldyBDdXJyZW50RmlsZVJlYWRlcih0aGlzLmFwcCkpLm9wZW4oKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ21lcmdlLWRhdGF2aWV3LXJlc3VsdHMtdG8nLFxuXHRcdFx0bmFtZTogJ01lcmdlIGRhdGF2aWV3IHF1ZXJ5IHJlc3VsdHMgdG8gLi4uJyxcblx0XHRcdGVkaXRvckNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbiwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRpZiAoIWNoZWNraW5nKSB7XG5cdFx0XHRcdFx0bmV3IENob29zZUZpbGVNb2RhbCh0aGlzLmFwcCwgbmV3IERhdGF2aWV3UmVhZGVyKHRoaXMuYXBwLCBlZGl0b3IuZ2V0U2VsZWN0aW9uKCkpKS5vcGVuKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGRhdGF2aWV3QXBpICE9IG51bGw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBEZWxldGUgRmlsZXNcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdkZWxldGUtZmlsZXMtaW4tY2xpcGJvYXJkJyxcblx0XHRcdG5hbWU6ICdEZWxldGUgZmlsZXMgaW4gY2xpcGJvYXJkIScsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRuZXcgQ2xpcGJvYXJkUmVhZGVyKHRoaXMuYXBwKS5yZWFkKG5ldyBEZWxldGVBY3Rpb24odGhpcy5hcHApKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJkZWxldGUtbGlua3MtaW4tY3VycmVudC1maWxlXCIsXG5cdFx0XHRuYW1lOiBcIkRlbGV0ZSBsaW5rLWZpbGVzIGluIGN1cnJlbnQgZmlsZSFcIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG5ldyBDdXJyZW50RmlsZVJlYWRlcih0aGlzLmFwcCkucmVhZChuZXcgRGVsZXRlQWN0aW9uKHRoaXMuYXBwKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdkZWxldGUtZGF0YXZpZXctcmVzdWx0cycsXG5cdFx0XHRuYW1lOiAnRGVsZXRlIGRhdGF2aWV3IHF1ZXJ5IHJlc3VsdHMhJyxcblx0XHRcdGVkaXRvckNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbiwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRpZiAoIWNoZWNraW5nKSB7XG5cdFx0XHRcdFx0bmV3IERhdGF2aWV3UmVhZGVyKHRoaXMuYXBwLCBlZGl0b3IuZ2V0U2VsZWN0aW9uKCkpLnJlYWQobmV3IERlbGV0ZUFjdGlvbih0aGlzLmFwcCkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBkYXRhdmlld0FwaSAhPSBudWxsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gY29weSBmaWxlIGxpbmtzXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnY29weS1kYXRhdmlldy1yZXN1bHQtbGlua3MnLFxuXHRcdFx0bmFtZTogJ0NvcHkgZGF0YXZpZXcgcmVzdWx0IGxpbmtzIScsXG5cdFx0XHRlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0aWYgKCFjaGVja2luZykge1xuXHRcdFx0XHRcdG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLmFwcCwgZWRpdG9yLmdldFNlbGVjdGlvbigpKS5yZWFkKG5ldyBDb3B5QWN0aW9uKHRoaXMuYXBwKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGRhdGF2aWV3QXBpICE9IG51bGw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBFZGl0IEZyb250IE1hdHRlciBcblx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vbGlqeXplL29ic2lkaWFuLXN0YXRlLXN3aXRjaGVyL2Jsb2IvZDBhODAwODFiMGZjYzFiODk5ZWVkMmUzZDdlODM0YzJkNTcwMzg3NS9zcmMvdXRpbC50cyNMNDJcblx0XHRsZXQgbWV0YWVkaXQgPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJtZXRhZWRpdFwiXTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2VkaXQtZnJvbnQtbWF0dGVyLWluLWNsaXBib2FyZC1maWxlcycsXG5cdFx0XHRuYW1lOiAnRWRpdCBGcm9udCBNYXR0ZXIgaW4gY2xpcGJvYXJkIGZpbGVzIC4uLicsXG5cdFx0XHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0aWYgKCFjaGVja2luZykge1xuXHRcdFx0XHRcdG5ldyBDbGlwYm9hcmRSZWFkZXIodGhpcy5hcHApLnJlYWQobmV3IEVkaXRGcm9udE1hdHRlckFjdGlvbih0aGlzLmFwcCkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBtZXRhZWRpdCAhPSBudWxsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImVkaXQtZnJvbnQtbWF0dGVyLWluLWN1cnJlbnQtZmlsZS1saW5rc1wiLFxuXHRcdFx0bmFtZTogXCJFZGl0IEZyb250IE1hdHRlciBpbiBjdXJyZW50IGZpbGUgbGlua3MgLi4uXCIsXG5cdFx0XHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0aWYgKCFjaGVja2luZykge1xuXHRcdFx0XHRcdG5ldyBDdXJyZW50RmlsZVJlYWRlcih0aGlzLmFwcCkucmVhZChuZXcgRWRpdEZyb250TWF0dGVyQWN0aW9uKHRoaXMuYXBwKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG1ldGFlZGl0ICE9IG51bGw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiZWRpdC1mcm9udC1tYXR0ZXItaW4tZGF0YXZpZXctcmVzdWx0c1wiLFxuXHRcdFx0bmFtZTogXCJFZGl0IEZyb250IE1hdHRlciBpbiBkYXRhdmlldyByZXN1bHRzIC4uLlwiLFxuXHRcdFx0ZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcblx0XHRcdFx0XHRuZXcgRGF0YXZpZXdSZWFkZXIodGhpcy5hcHAsIGVkaXRvci5nZXRTZWxlY3Rpb24oKSkucmVhZChuZXcgRWRpdEZyb250TWF0dGVyQWN0aW9uKHRoaXMuYXBwKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGRhdGF2aWV3QXBpICE9IG51bGwgJiYgbWV0YWVkaXQgIT0gbnVsbDtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIFJlbmFtZSBGaWxlc1xuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3JlbmFtZS1pbi1jbGlwYm9hcmQtZmlsZXMnLFxuXHRcdFx0bmFtZTogJ1JlbmFtZSBpbiBjbGlwYm9hcmQgZmlsZXMgLi4uJyxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG5ldyBDbGlwYm9hcmRSZWFkZXIodGhpcy5hcHApLnJlYWQobmV3IFJlbmFtZUFjdGlvbih0aGlzLmFwcCkpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcInJlbmFtZS1pbi1jdXJyZW50LWZpbGUtbGlua3NcIixcblx0XHRcdG5hbWU6IFwiUmVuYW1lIGluIGN1cnJlbnQgZmlsZSBsaW5rcyAuLi5cIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG5ldyBDdXJyZW50RmlsZVJlYWRlcih0aGlzLmFwcCkucmVhZChuZXcgUmVuYW1lQWN0aW9uKHRoaXMuYXBwKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwicmVuYW1lLWluLWRhdGF2aWV3LXJlc3VsdHNcIixcblx0XHRcdG5hbWU6IFwiUmVuYW1lIGluIGRhdGF2aWV3IHJlc3VsdHMgLi4uXCIsXG5cdFx0XHRlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0aWYgKCFjaGVja2luZykge1xuXHRcdFx0XHRcdG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLmFwcCwgZWRpdG9yLmdldFNlbGVjdGlvbigpKS5yZWFkKG5ldyBSZW5hbWVBY3Rpb24odGhpcy5hcHApKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbDtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBGaWxlQ29va2VyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBGaWxlQ29va2VyUGx1Z2luU2V0dGluZ3MgPSB7XG5cdGZsb21vQVBJOiAnJ1xufVxuXG5pbnRlcmZhY2UgRmlsZUNvb2tlclBsdWdpblNldHRpbmdzIHtcblx0ZmxvbW9BUEk6IHN0cmluZztcbn1cblxuY2xhc3MgRmlsZUNvb2tlclNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEZpbGVDb29rZXJQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnU2V0dGluZ3MgZm9yIEZpbGUgQ29va2VyISd9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ2Zsb21vQVBJJylcblx0XHRcdC5zZXREZXNjKCdjb25maWcgZmxvbW8gQVBJIHRvIHN5bmMgbm90ZXMnKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgZmxvbW8gQVBJJylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZsb21vQVBJKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZmxvbW9BUEkgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXHR9XG59IiwgImltcG9ydCB7IEFwcCwgU3VnZ2VzdE1vZGFsLCBUQWJzdHJhY3RGaWxlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9hY3Rpb24nO1xuaW1wb3J0IHsgTW92ZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vbW92ZS1hY3Rpb24nO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tICdzcmMvcmVhZGVyL3JlYWRhYmxlJztcblxuLyoqXG4gKiBcdTkwMDlcdTYyRTlcdTc2RUVcdTVGNTVcdTVGMzlcdTdBOTdcbiAqL1xuZXhwb3J0IGNsYXNzIENob29zZUZvbGRlck1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPFRBYnN0cmFjdEZpbGU+IHtcblxuXHR0eXBlOiBzdHJpbmc7XG5cdHJlYWRhYmxlOiBSZWFkYWJsZTtcblx0YWN0aW9uRnVuYzogKHBhdGg6IHN0cmluZykgPT4gQWN0aW9uO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCByZWFkYWJsZTogUmVhZGFibGUsIGFjdGlvbkZ1bmM6IChwYXRoOiBzdHJpbmcpID0+IEFjdGlvbikge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5yZWFkYWJsZSA9IHJlYWRhYmxlO1xuXHRcdHRoaXMuYWN0aW9uRnVuYyA9IGFjdGlvbkZ1bmM7XG5cdH1cblxuXHQvLyBSZXR1cm5zIGFsbCBhdmFpbGFibGUgc3VnZ2VzdGlvbnMuXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBUQWJzdHJhY3RGaWxlW10ge1xuXHRcdGNvbnN0IGFic3RyYWN0RmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpO1xuXHRcdGNvbnN0IGZvbGRlcnM6IFRBYnN0cmFjdEZpbGVbXSA9IFtdO1xuXHRcdGNvbnN0IGxvd2VyQ2FzZUlucHV0U3RyID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcblx0XHRhYnN0cmFjdEZpbGVzLmZvckVhY2goKGZvbGRlcikgPT4ge1xuXHRcdFx0aWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIgJiYgZm9sZGVyLnBhdGgudG9Mb3dlckNhc2UoKS5jb250YWlucyhsb3dlckNhc2VJbnB1dFN0cikpIHtcblx0XHRcdFx0Zm9sZGVycy5wdXNoKGZvbGRlcik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGZvbGRlcnM7XG5cdH1cblxuXHQvLyBSZW5kZXJzIGVhY2ggc3VnZ2VzdGlvbiBpdGVtLlxuXHRyZW5kZXJTdWdnZXN0aW9uKGZvbGRlcjogVEFic3RyYWN0RmlsZSwgZWw6IEhUTUxFbGVtZW50KSB7XG5cdFx0ZWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBmb2xkZXIucGF0aCB9KTtcblx0XHQvLyBlbC5jcmVhdGVFbChcInNtYWxsXCIsIHsgdGV4dDogZm9sZGVyLnBhdGggfSk7XG5cdH1cblxuXHQvLyBQZXJmb3JtIGFjdGlvbiBvbiB0aGUgc2VsZWN0ZWQgc3VnZ2VzdGlvbi5cblx0b25DaG9vc2VTdWdnZXN0aW9uKGZvbGRlcjogVEFic3RyYWN0RmlsZSwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge1xuXHRcdGxldCBhY3Rpb24gPSB0aGlzLmFjdGlvbkZ1bmMoZm9sZGVyLnBhdGgpO1xuXHRcdHRoaXMucmVhZGFibGUucmVhZChhY3Rpb24pO1xuXHR9XG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwic3JjL2FjdGlvbi9hY3Rpb25cIjtcbmltcG9ydCB7IFJlYWRJbmZvIH0gZnJvbSBcIi4vcmVhZC1pbmZvXCI7XG5pbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gXCIuL3JlYWRhYmxlXCI7XG5cblxuZXhwb3J0IGNsYXNzIENsaXBib2FyZFJlYWRlciBpbXBsZW1lbnRzIFJlYWRhYmxlIHtcblxuICAgIGFwcDogQXBwO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgfVxuXG4gICAgcmVhZChhY3Rpb246IEFjdGlvbik6IHZvaWQge1xuICAgICAgICBsZXQgcmVhZEluZm8gPSBuZXcgUmVhZEluZm8oKTtcblxuICAgICAgICBsZXQgcHJvbWlzZVN0ciA9IG5hdmlnYXRvci5jbGlwYm9hcmQucmVhZFRleHQoKTtcblxuICAgICAgICBwcm9taXNlU3RyLnRoZW4oc3RyID0+IHtcbiAgICAgICAgICAgIGxldCBsaW5lcyA9IHN0ci5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaChsaW5lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGYgPSBsaW5lO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZi5zdGFydHNXaXRoKFwiW1tcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBmLnN1YnN0cmluZygyLCBmLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGYuZW5kc1dpdGgoXCJdXVwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGYuc3Vic3RyaW5nKDAsIGYubGVuZ3RoIC0gMik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmLmVuZHNXaXRoKFwiLm1kXCIpICYmICFmLmVuZHNXaXRoKFwiLk1EXCIpICYmICFmLmVuZHNXaXRoKFwiLk1kXCIpICYmICFmLmVuZHNXaXRoKFwiLm1EXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmID0gZiArIFwiLm1kXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGZmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGYpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZEluZm8uYWRkKGZmKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFjdGlvbi5hY3QocmVhZEluZm8uZ2V0RmlsZXMoKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaChlID0+IHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDbGlwYm9hcmQgQ29udGVudCBFcnJvciFcIiArIGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbn0iLCAiaW1wb3J0IHsgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0ICogYXMgaW50ZXJuYWwgZnJvbSBcInN0cmVhbVwiO1xuXG5cbi8qKlxuICogXHU4QkZCXHU1M0Q2XHU3Njg0XHU0RkUxXHU2MDZGXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFkSW5mbyB7XG5cbiAgICBsaW1pdDogbnVtYmVyO1xuICAgIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdO1xuXG4gICAgY29uc3RydWN0b3IobGltaXQ6IG51bWJlciA9IDMwMCkge1xuICAgICAgICB0aGlzLmxpbWl0ID0gbGltaXQ7XG4gICAgICAgIHRoaXMucmVzdWx0QXJyID0gW107XG4gICAgfVxuXG4gICAgYWRkKGZpbGU6IFRBYnN0cmFjdEZpbGUpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0QXJyLmxlbmd0aCA+PSB0aGlzLmxpbWl0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb2FkIG1vcmUgdGhhbiBcIiArIHRoaXMubGltaXQgKyBcIiBmaWxlcyFcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXN1bHRBcnIucHVzaChmaWxlKTtcbiAgICB9XG5cbiAgICBnZXRGaWxlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0QXJyO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IERlbGV0ZUNvbmZpcm1Nb2RhbCB9IGZyb20gXCJzcmMvbW9kYWwvZGVsZXRlLWNvbmZpcm0tbW9kYWxcIjtcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgRGVsZXRlQWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcblxuICAgIGFwcDogQXBwO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgfVxuXG4gICAgYWN0KHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdKSB7XG4gICAgICAgIGlmIChyZXN1bHRBcnIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbmV3IERlbGV0ZUNvbmZpcm1Nb2RhbCh0aGlzLmFwcCwgcmVzdWx0QXJyKS5vcGVuKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gRmlsZXMgRm91bmQhXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZywgVEFic3RyYWN0RmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuLyoqXG4gKiBcdTAwQTBcdTVGMzlcdTdBOTdcdTc4NkVcdThCQTRcdTg5ODFcdTUyMjBcdTk2NjRcdTc2ODRcdTY1ODdcdTRFRjZcbiAqL1xuZXhwb3J0IGNsYXNzIERlbGV0ZUNvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXTtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnJlc3VsdEFycj0gcmVzdWx0QXJyO1xuICAgIH1cblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkNvbmZpcm0gRGVsZXRlP1wiIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLnJlc3VsdEFyci5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogXCJObyBmaWxlcyBmb3VuZCFcIiB9KTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNsb3NlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdEFyci5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGluZm8ucGF0aCB9KTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDb25maXJtXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRBcnIuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQudHJhc2goaW5mbywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRGVsZXRlIFN1Y2Nlc3MhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkRlbGV0ZSBDYW5jZWxlZCFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBvbkNsb3NlKCkge1xuICAgIC8vICAgICBsZXQgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgLy8gICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIC8vIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEFic3RyYWN0RmlsZSwgVEZpbGUsIFRGb2xkZXIsIFZhdWx0IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwic3JjL2FjdGlvbi9hY3Rpb25cIjtcbmltcG9ydCB7IFJlYWRJbmZvIH0gZnJvbSBcIi4vcmVhZC1pbmZvXCI7XG5pbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gXCIuL3JlYWRhYmxlXCI7XG5cblxuZXhwb3J0IGNsYXNzIEN1cnJlbnRGaWxlUmVhZGVyIGltcGxlbWVudHMgUmVhZGFibGUge1xuXG4gICAgYXBwOiBBcHA7XG4gICAgdW5SZXNvbHZlZEZsYWc6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB1blJlc29sdmVkRmxhZz86IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMudW5SZXNvbHZlZEZsYWcgPSB1blJlc29sdmVkRmxhZztcbiAgICB9XG5cbiAgICByZWFkKGFjdGlvbjogQWN0aW9uKTogdm9pZCB7XG4gICAgICAgIGxldCByZWFkSW5mbyA9IG5ldyBSZWFkSW5mbygpO1xuXG4gICAgICAgIGxldCBjdXJyZW50RmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRGaWxlID09IG51bGwpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBhY3RpdmUgZmlsZSFcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY3VycmVudEZpbGVQYXRoID0gY3VycmVudEZpbGUucGF0aDtcblxuICAgICAgICBsZXQgbGlua09iajtcbiAgICAgICAgaWYgKCF0aGlzLnVuUmVzb2x2ZWRGbGFnKSB7XG4gICAgICAgICAgICBsaW5rT2JqID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5yZXNvbHZlZExpbmtzW2N1cnJlbnRGaWxlUGF0aF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsaW5rT2JqID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS51bnJlc29sdmVkTGlua3NbY3VycmVudEZpbGVQYXRoXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudW5SZXNvbHZlZEZsYWcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gbGlua09iaikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmYgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRJbmZvLmFkZChmZik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFx1NjcyQVx1ODlFM1x1Njc5MFx1NzY4NFx1OTRGRVx1NjNBNVx1RkYwQ1x1NTIxQlx1NUVGQVx1ODY1QVx1NjJERlx1NjU4N1x1NEVGNlx1NUJGOVx1OEM2MVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBsaW5rT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmZiA9IG5ldyBWaXJ0dWFsRmlsZShrZXkpO1xuICAgICAgICAgICAgICAgICAgICByZWFkSW5mby5hZGQoZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjdGlvbi5hY3QocmVhZEluZm8uZ2V0RmlsZXMoKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoZS5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTVCOUVcdTk2NDVcdTY1ODdcdTRFRjZcdUZGMENcdTVDMzFcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTg2NUFcdTY1ODdcdTRFRjZcbiAqIFx1N0VEM1x1Njc4NFx1NTQ4Q1RBYnN0cmFjdEZpbGVcdTRFMDBcdTgxRjRcdUZGMENcdTY1QjlcdTRGQkZcdTdFREZcdTRFMDBcdTY0Q0RcdTRGNUNcbiAqL1xuY2xhc3MgVmlydHVhbEZpbGUge1xuXG4gICAgdmF1bHQ6IFZhdWx0O1xuICAgIHBhdGg6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgcGFyZW50OiBURm9sZGVyO1xuXG4gICAgY29uc3RydWN0b3IocGF0aDogc3RyaW5nKSB7XG4gICAgICAgIGxldCBpZHggPSBwYXRoLmxhc3RJbmRleE9mKFwiL1wiKTtcbiAgICAgICAgaWYgKCFwYXRoLmVuZHNXaXRoKFwiLm1kXCIpKSB7XG4gICAgICAgICAgICBwYXRoID0gcGF0aCArIFwiLm1kXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBwYXRoLnN1YnN0cmluZyhpZHgsIHBhdGgubGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHBhdGg7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwic3JjL2FjdGlvbi9hY3Rpb25cIjtcbmltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSBcIi4vcmVhZGFibGVcIjtcbmltcG9ydCB7IGdldEFQSSB9IGZyb20gXCJvYnNpZGlhbi1kYXRhdmlld1wiO1xuaW1wb3J0IHsgUmVhZEluZm8gfSBmcm9tIFwiLi9yZWFkLWluZm9cIjtcblxuZXhwb3J0IGNsYXNzIERhdGF2aWV3UmVhZGVyIGltcGxlbWVudHMgUmVhZGFibGUge1xuXG4gICAgYXBwOiBBcHA7XG4gICAgcXVlcnlTdHI6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBxdWVyeVN0cjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnF1ZXJ5U3RyID0gcXVlcnlTdHI7XG4gICAgfVxuXG4gICAgcmVhZChhY3Rpb246IEFjdGlvbik6IHZvaWQge1xuICAgICAgICBsZXQgcmVhZEluZm8gPSBuZXcgUmVhZEluZm8oKTtcblxuICAgICAgICBsZXQgYXBpID0gZ2V0QVBJKCk7XG5cbiAgICAgICAgbGV0IHFTdHIgPSBmb3JtYXRTdHIodGhpcy5xdWVyeVN0cik7XG5cbiAgICAgICAgYXBpLnF1ZXJ5KHFTdHIpLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzc2Z1bCkge1xuICAgICAgICAgICAgICAgIGxldCBmaWxlUGF0aHM6IGFueSA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChyZXMudmFsdWUudHlwZSA9PSBcImxpc3RcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBMSVNUXG4gICAgICAgICAgICAgICAgICAgIHJlcy52YWx1ZS52YWx1ZXMuZm9yRWFjaChpdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aHMucHVzaChpdC5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMudmFsdWUudHlwZSA9PSBcInRhYmxlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVEFCTEVcbiAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGhzID0gcmVzLnZhbHVlLnZhbHVlcztcbiAgICAgICAgICAgICAgICAgICAgcmVzLnZhbHVlLnZhbHVlcy5mb3JFYWNoKGl0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0LmZvckVhY2goaW5uZXJJdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVySXQgJiYgaW5uZXJJdC5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVQYXRocy5wdXNoKGlubmVySXQucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUQVNLXG4gICAgICAgICAgICAgICAgICAgIHJlcy52YWx1ZS52YWx1ZXMuZm9yRWFjaChpdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aHMucHVzaChpdC5saW5rLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGhzLmZvckVhY2goKGZpbGVQYXRoOiB7IHRvU3RyaW5nOiAoKSA9PiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmZiA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZEluZm8uYWRkKGZmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uLmFjdChyZWFkSW5mby5nZXRGaWxlcygpKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJRdWVyeSBzdHJpbmcgZXJyb3IhW1wiICsgdGhpcy5xdWVyeVN0ciArIFwiXVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59XG5cbi8qKlxuICogXHU1OTI3XHU1MTk5XHU1NDdEXHU0RUU0XG4gKi9cbmZ1bmN0aW9uIGZvcm1hdFN0cihxdWVyeVN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBsZXQgc3RyID0gcXVlcnlTdHIudHJpbVN0YXJ0KCk7XG5cbiAgICBsZXQgY29tbWFuZFN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgNCk7XG5cbiAgICBpZiAoY29tbWFuZFN0ci50b1VwcGVyQ2FzZSgpID09IFwiTElTVFwiKSB7XG4gICAgICAgIHJldHVybiBcIkxJU1RcIiArIHN0ci5zdWJzdHJpbmcoNCwgc3RyLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgaWYgKGNvbW1hbmRTdHIudG9VcHBlckNhc2UoKSA9PSBcIlRBQkxcIikge1xuICAgICAgICByZXR1cm4gXCJUQUJMRVwiICsgc3RyLnN1YnN0cmluZyg1LCBzdHIubGVuZ3RoKTtcbiAgICB9XG5cbiAgICBpZiAoY29tbWFuZFN0ci50b1VwcGVyQ2FzZSgpID09IFwiVEFTS1wiKSB7XG4gICAgICAgIHJldHVybiBcIlRBU0tcIiArIHN0ci5zdWJzdHJpbmcoNCwgc3RyLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHF1ZXJ5U3RyO1xufVxuIiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIENvcHlBY3Rpb24gaW1wbGVtZW50cyBBY3Rpb24ge1xuXG4gICAgYXBwOiBBcHA7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB9XG5cbiAgICBhY3QocmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcblxuICAgICAgICBpZiAocmVzdWx0QXJyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxldCBzdHIgPSBcIlwiO1xuICAgICAgICAgICAgcmVzdWx0QXJyLmZvckVhY2goZmYgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBuYW1lID0gZmYubmFtZTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZS5lbmRzV2l0aChcIi5tZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoMCwgbmFtZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdHIgKz0gXCJbW1wiICsgZmYucGF0aCArIFwifFwiICsgbmFtZSArIFwiXV1cXG5cIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChzdHIpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkNvcHkgbGlua3Mgc3VjY2VzcyFcIilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEVkaXRGcm9udE1hdHRlck1vZGFsIH0gZnJvbSBcInNyYy9tb2RhbC9lZGl0LWZyb250LW1hdHRlci1tb2RhbFwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBFZGl0RnJvbnRNYXR0ZXJBY3Rpb24gaW1wbGVtZW50cyBBY3Rpb24ge1xuXG4gICAgYXBwOiBBcHA7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB9XG5cbiAgICBhY3QocmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcbiAgICAgICAgaWYgKHJlc3VsdEFyci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBuZXcgRWRpdEZyb250TWF0dGVyTW9kYWwodGhpcy5hcHAsIHJlc3VsdEFycikub3BlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIEZpbGVzIEZvdW5kIVwiKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vKipcbiAqIFx1MDBBMFx1NUYzOVx1N0E5N1x1N0YxNlx1OEY5MUZyb250IE1hdHRlclx1NUM1RVx1NjAyN1xuICovXG5leHBvcnQgY2xhc3MgRWRpdEZyb250TWF0dGVyTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW107XG4gICAga2V5OiBTdHJpbmc7XG4gICAgdmFsOiBTdHJpbmc7XG4gICAgb3ZlcnJpZGVGbGFnOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucmVzdWx0QXJyID0gcmVzdWx0QXJyO1xuICAgICAgICBsZXQgdG1wRmxhZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwib3ZlcnJpZGVGbGFnXCIpO1xuICAgICAgICBpZiAodG1wRmxhZyAmJiBcInRydWVcIiA9PSB0bXBGbGFnKSB7XG4gICAgICAgICAgICB0aGlzLm92ZXJyaWRlRmxhZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJFZGl0IEZyb250IE1hdHRlclwiIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLnJlc3VsdEFyci5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogXCJObyBmaWxlcyBmb3VuZCFcIiB9KTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNsb3NlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdEFyci5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGluZm8ucGF0aCB9KTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodHh0KSA9PlxuICAgICAgICAgICAgICAgICAgICB0eHQuc2V0UGxhY2Vob2xkZXIoXCJGcm9udCBNYXR0ZXIgS2V5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMua2V5ID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApLmFkZFRleHQoKHR4dCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdHh0LnNldFBsYWNlaG9sZGVyKFwiRnJvbnQgTWF0dGVyIFZhbHVlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLm92ZXJyaWRlRmxhZyk7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRUb29sdGlwKFwiT3ZlcnJpZGUgaWYgZXhpc3RzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKCh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwib3ZlcnJpZGVGbGFnXCIsIHZhbCArIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vdmVycmlkZUZsYWcgPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDb25maXJtXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5rZXkgPT0gbnVsbCB8fCB0aGlzLmtleS50cmltKCkgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiS2V5IGNvdWxkIG5vdCBiZSBlbXB0eSFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsID09IG51bGwgfHwgdGhpcy52YWwudHJpbSgpID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlZhbHVlIGNvdWxkIG5vdCBiZSBlbXB0eSFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhcGkgPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJtZXRhZWRpdFwiXS5hcGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNfbnVtID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdV9udW0gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yZXN1bHRBcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLnJlc3VsdEFycltpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZhbCA9IGF3YWl0IGFwaS5nZXRQcm9wZXJ0eVZhbHVlKHRoaXMua2V5LCBpbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkuY3JlYXRlWWFtbFByb3BlcnR5KHRoaXMua2V5LCB0aGlzLnZhbCwgaW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjX251bSArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3ZlcnJpZGVGbGFnIHx8IHZhbC50cmltKCkgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnVwZGF0ZSh0aGlzLmtleSwgdGhpcy52YWwsIGluZm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdV9udW0gKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRWRpdCBTdWNjZXNzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQWRkIFwiICsgY19udW0gKyBcIiAhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJVcGRhdGUgXCIgKyB1X251bSArIFwiICFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRWRpdCBDYW5jZWxlZCFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBSZW5hbWVNb2RhbCB9IGZyb20gXCJzcmMvbW9kYWwvcmVuYW1lLW1vZGFsXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIFJlbmFtZUFjdGlvbiBpbXBsZW1lbnRzIEFjdGlvbiB7XG5cbiAgICBhcHA6IEFwcDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIH1cblxuICAgIGFjdChyZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXSkge1xuICAgICAgICBpZiAocmVzdWx0QXJyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG5ldyBSZW5hbWVNb2RhbCh0aGlzLmFwcCwgcmVzdWx0QXJyKS5vcGVuKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gRmlsZXMgRm91bmQhXCIpO1xuICAgICAgICB9XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcsIFRBYnN0cmFjdEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBSZW5hbWVDb25maXJtTW9kYWwgfSBmcm9tICcuL3JlbmFtZS1jb25maXJtLW1vZGFsJztcblxuLyoqXG4gKiBcdTAwQTBcdTkxQ0RcdTU0N0RcdTU0MERcdThCQkVcdTdGNkVcdTVGMzlcdTdBOTdcbiAqL1xuZXhwb3J0IGNsYXNzIFJlbmFtZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdO1xuICAgIHByZWZpeDogU3RyaW5nO1xuICAgIHN1ZmZpeDogU3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucmVzdWx0QXJyID0gcmVzdWx0QXJyO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIlJlbmFtZSBGaWxlc1wiIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLnJlc3VsdEFyci5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogXCJObyBmaWxlcyBmb3VuZCFcIiB9KTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNsb3NlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdEFyci5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGluZm8ucGF0aCB9KTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodHh0KSA9PlxuICAgICAgICAgICAgICAgICAgICB0eHQuc2V0UGxhY2Vob2xkZXIoXCJQcmVmaXhcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVmaXggPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICkuYWRkVGV4dCgodHh0KSA9PlxuICAgICAgICAgICAgICAgICAgICB0eHQuc2V0UGxhY2Vob2xkZXIoXCJTdWZmaXhcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWZmaXggPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDb25maXJtXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMucHJlZml4ID09IG51bGwgfHwgdGhpcy5wcmVmaXgudHJpbSgpID09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKHRoaXMuc3VmZml4ID09IG51bGwgfHwgdGhpcy5zdWZmaXgudHJpbSgpID09IFwiXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJQcmVmaXggYW5kIFN1ZmZpeCBjb3VsZCBub3QgYmUgYWxsIGVtcHR5IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFJlbmFtZUNvbmZpcm1Nb2RhbCh0aGlzLmFwcCwgdGhpcy5yZXN1bHRBcnIsIHRoaXMucHJlZml4LCB0aGlzLnN1ZmZpeCkub3BlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlJlbmFtZSBDYW5jZWxlZCFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZywgVEFic3RyYWN0RmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuLyoqXG4gKiBcdTAwQTBcdTkxQ0RcdTU0N0RcdTU0MERcdTc4NkVcdThCQTRcdTVGMzlcdTdBOTdcbiAqL1xuZXhwb3J0IGNsYXNzIFJlbmFtZUNvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXTtcbiAgICBwcmVmaXg6IFN0cmluZztcbiAgICBzdWZmaXg6IFN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXSwgcHJlZml4OiBTdHJpbmcsIHN1ZmZpeDogU3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucmVzdWx0QXJyID0gcmVzdWx0QXJyO1xuICAgICAgICB0aGlzLnByZWZpeCA9IHByZWZpeDtcbiAgICAgICAgdGhpcy5zdWZmaXggPSBzdWZmaXg7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiUmVuYW1lIEZpbGVzXCIgfSk7XG5cbiAgICAgICAgdGhpcy5yZXN1bHRBcnIuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgIGxldCBuYW1lID0gdGhpcy5uZXdOYW1lKGluZm8ubmFtZSk7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBpbmZvLm5hbWUgKyBcIi0+XCIgKyBuYW1lIH0pO1xuICAgICAgICB9KVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDb25maXJtXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMucHJlZml4ID09IG51bGwgfHwgdGhpcy5wcmVmaXgudHJpbSgpID09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKHRoaXMuc3VmZml4ID09IG51bGwgfHwgdGhpcy5zdWZmaXgudHJpbSgpID09IFwiXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlByZWZpeCBhbmQgU3VmZml4IGNvdWxkIG5vdCBiZSBhbGwgZW1wdHkhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yZXN1bHRBcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IHRoaXMucmVzdWx0QXJyW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuYW1lID0gdGhpcy5uZXdOYW1lKGluZm8ubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShpbmZvLCBpbmZvLnBhcmVudC5wYXRoICsgXCIvXCIgKyBuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJSZW5hbWUgU3VjY2VzcyFcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlJlbmFtZSBDYW5jZWxlZCFcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgIH1cblxuICAgIG5ld05hbWUobmFtZTogU3RyaW5nKTogU3RyaW5nIHtcbiAgICAgICAgbGV0IHROYW1lID0gbmFtZSArIFwiXCI7XG4gICAgICAgIGxldCBzdWYgPSBcIlwiO1xuICAgICAgICBpZiAodE5hbWUuZW5kc1dpdGgoXCIubWRcIikpIHtcbiAgICAgICAgICAgIHROYW1lID0gdE5hbWUucmVwbGFjZShcIi5tZFwiLCBcIlwiKTtcbiAgICAgICAgICAgIHN1ZiA9IFwiLm1kXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJlZml4LnN0YXJ0c1dpdGgoXCItXCIpKSB7XG4gICAgICAgICAgICBsZXQgdCA9IHRoaXMucHJlZml4LnN1YnN0cmluZygxLCB0aGlzLnByZWZpeC5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKHROYW1lLnN0YXJ0c1dpdGgodCkpIHtcbiAgICAgICAgICAgICAgICB0TmFtZSA9IHROYW1lLnN1YnN0cmluZyh0Lmxlbmd0aCwgdE5hbWUubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHROYW1lID0gdGhpcy5wcmVmaXggKyB0TmFtZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdWZmaXguc3RhcnRzV2l0aChcIi1cIikpIHtcbiAgICAgICAgICAgIGxldCB0ID0gdGhpcy5zdWZmaXguc3Vic3RyaW5nKDEsIHRoaXMuc3VmZml4Lmxlbmd0aCk7XG4gICAgICAgICAgICBpZiAodE5hbWUuZW5kc1dpdGgodCkpIHtcbiAgICAgICAgICAgICAgICB0TmFtZSA9IHROYW1lLnN1YnN0cmluZygwLCB0TmFtZS5sZW5ndGggLSB0Lmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0TmFtZSA9IHROYW1lICsgdGhpcy5zdWZmaXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHROYW1lICsgc3VmO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBTdWdnZXN0TW9kYWwsIFRBYnN0cmFjdEZpbGUsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgTWVyZ2VBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL21lcmdlLWFjdGlvbic7XG5pbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gJ3NyYy9yZWFkZXIvcmVhZGFibGUnO1xuXG4vKipcbiAqIFx1OTAwOVx1NjJFOVx1NjU4N1x1Njg2M1x1NUYzOVx1N0E5N1xuICovXG5leHBvcnQgY2xhc3MgQ2hvb3NlRmlsZU1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPHN0cmluZz4ge1xuXG5cdHR5cGU6IHN0cmluZztcblx0cmVhZGFibGU6IFJlYWRhYmxlO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCByZWFkYWJsZTogUmVhZGFibGUpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMucmVhZGFibGUgPSByZWFkYWJsZTtcblx0fVxuXG5cdC8vIFJldHVybnMgYWxsIGF2YWlsYWJsZSBzdWdnZXN0aW9ucy5cblx0Z2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IHN0cmluZ1tdIHtcblx0XHRjb25zdCBhYnN0cmFjdEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKTtcblx0XHRjb25zdCBmaWxlczogc3RyaW5nW10gPSBbXTtcblx0XHRjb25zdCBsb3dlckNhc2VJbnB1dFN0ciA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG5cdFx0YWJzdHJhY3RGaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmNvbnRhaW5zKGxvd2VyQ2FzZUlucHV0U3RyKSkge1xuXHRcdFx0XHRmaWxlcy5wdXNoKGZpbGUucGF0aCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0aWYgKGZpbGVzLmxlbmd0aCA9PSAwKSB7XG5cdFx0XHRpZiAocXVlcnkuZW5kc1dpdGgoXCIubWRcIikpIHtcblx0XHRcdFx0ZmlsZXMucHVzaChxdWVyeSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmaWxlcy5wdXNoKHF1ZXJ5ICsgXCIubWRcIik7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBmaWxlcztcblx0fVxuXG5cdC8vIFJlbmRlcnMgZWFjaCBzdWdnZXN0aW9uIGl0ZW0uXG5cdHJlbmRlclN1Z2dlc3Rpb24oZmlsZVBhdGg6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KSB7XG5cdFx0ZWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBmaWxlUGF0aCB9KTtcblx0fVxuXG5cdC8vIFBlcmZvcm0gYWN0aW9uIG9uIHRoZSBzZWxlY3RlZCBzdWdnZXN0aW9uLlxuXHRvbkNob29zZVN1Z2dlc3Rpb24oZmlsZTogc3RyaW5nLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XG5cdFx0bGV0IGFjdGlvbiA9IG5ldyBNZXJnZUFjdGlvbih0aGlzLmFwcCwgZmlsZSk7XG5cdFx0dGhpcy5yZWFkYWJsZS5yZWFkKGFjdGlvbik7XG5cdH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IE1lcmdlQ29uZmlybU1vZGFsIH0gZnJvbSBcInNyYy9tb2RhbC9tZXJnZS1jb25maXJtLW1vZGFsXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIE1lcmdlQWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcblxuICAgIGFwcDogQXBwO1xuICAgIHRhcmdldEZpbGVQYXRoOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGFyZ2V0RmlsZVBhdGg6IHN0cmluZykge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy50YXJnZXRGaWxlUGF0aCA9IHRhcmdldEZpbGVQYXRoO1xuICAgIH1cblxuICAgIGFzeW5jIGFjdChyZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXSkge1xuXG4gICAgICAgIGlmIChyZXN1bHRBcnIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbmV3IE1lcmdlQ29uZmlybU1vZGFsKHRoaXMuYXBwLCByZXN1bHRBcnIsIHRoaXMudGFyZ2V0RmlsZVBhdGgpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBUQWJzdHJhY3RGaWxlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuLyoqXG4gKiBcdTAwQTBcdTVGMzlcdTdBOTdcdTc4NkVcdThCQTRcdTg5ODFcdTU0MDhcdTVFNzZcdTc2ODRcdTY1ODdcdTRFRjZcbiAqL1xuZXhwb3J0IGNsYXNzIE1lcmdlQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHRhcmdldEZpbGVQYXRoOiBzdHJpbmc7XG4gICAgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW107XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10sIHRhcmdldEZpbGVQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy50YXJnZXRGaWxlUGF0aCA9IHRhcmdldEZpbGVQYXRoO1xuICAgICAgICB0aGlzLnJlc3VsdEFyciA9IHJlc3VsdEFycjtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJDb25maXJtIE1lcmdlP1wiIH0pO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiTWVyZ2UgYWxsIGZpbGVzIGJlbG93IC0+IFwiICsgdGhpcy50YXJnZXRGaWxlUGF0aCArIFwiICFcIn0pO1xuICAgICAgICB0aGlzLnJlc3VsdEFyci5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaW5mby5wYXRoIH0pO1xuICAgICAgICB9KVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG4uc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMudGFyZ2V0RmlsZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldEZpbGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUodGhpcy50YXJnZXRGaWxlUGF0aCwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLnJlc3VsdEFycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmZvID0gdGhpcy5yZXN1bHRBcnJba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoKGluZm8gYXMgVEZpbGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hcHBlbmQoKHRhcmdldEZpbGUgYXMgVEZpbGUpLCBjb250KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJNZXJnZSBTdWNjZXNzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTWVyZ2UgQ2FuY2VsZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgTW92ZUNvbmZpcm1Nb2RhbCB9IGZyb20gXCIuLi9tb2RhbC9tb3ZlLWNvbmZpcm0tbW9kYWxcIjtcbmltcG9ydCB7IE1vdmVJbmZvIH0gZnJvbSBcIi4uL21vZGFsL21vdmUtaW5mb1wiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBNb3ZlQWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcblxuICAgIGFwcDogQXBwO1xuICAgIHRhcmdldFBhdGg6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0YXJnZXRQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMudGFyZ2V0UGF0aCA9IHRhcmdldFBhdGg7XG4gICAgfVxuXG4gICAgYWN0KHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdKSB7XG5cbiAgICAgICAgY29uc3QgbW92ZUluZm9zOiBNb3ZlSW5mb1tdID0gW107XG5cbiAgICAgICAgaWYgKHJlc3VsdEFyci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXN1bHRBcnIuZm9yRWFjaChmZiA9PiB7XG4gICAgICAgICAgICAgICAgbW92ZUluZm9zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VGaWxlOiBmZixcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGlyOiB0aGlzLnRhcmdldFBhdGhcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIG5ldyBNb3ZlQ29uZmlybU1vZGFsKHRoaXMuYXBwLCBtb3ZlSW5mb3MpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IE1vdmVJbmZvIH0gZnJvbSAnc3JjL21vZGFsL21vdmUtaW5mbyc7XG5cbi8qKlxuICogXHUwMEEwXHU1RjM5XHU3QTk3XHU3ODZFXHU4QkE0XHU4OTgxXHU3OUZCXHU1MkE4L1x1NjJGN1x1OEQxRFx1NzY4NFx1NjU4N1x1NEVGNlxuICovXG5leHBvcnQgY2xhc3MgTW92ZUNvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBtb3ZlSW5mb3M6IE1vdmVJbmZvW107XG4gICAgY29weUZsYWc6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbW92ZUluZm9zOiBNb3ZlSW5mb1tdKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMubW92ZUluZm9zID0gbW92ZUluZm9zO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkNvbmZpcm0gTW92ZS9Db3B5P1wiIH0pO1xuXG4gICAgICAgIHRoaXMubW92ZUluZm9zLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBpbmZvLnNvdXJjZUZpbGUucGF0aCArIFwiIC0+IFwiICsgaW5mby50YXJnZXREaXIgKyBcIi9cIiArIGluZm8uc291cmNlRmlsZS5uYW1lIH0pO1xuICAgICAgICB9KVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRUb29sdGlwKFwiQ29weSBpbnN0ZWFkIVwiKTtcbiAgICAgICAgICAgICAgICB0b2dnbGUub25DaGFuZ2UoKHZhbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcHlGbGFnID0gdmFsO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG4uc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvcHlGbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5tb3ZlSW5mb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLm1vdmVJbmZvc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jb3B5KChpbmZvLnNvdXJjZUZpbGUgYXMgVEZpbGUpLCBpbmZvLnRhcmdldERpciArIFwiL1wiICsgaW5mby5zb3VyY2VGaWxlLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ29weSBTdWNjZXNzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5tb3ZlSW5mb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLm1vdmVJbmZvc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGluZm8uc291cmNlRmlsZSwgaW5mby50YXJnZXREaXIgKyBcIi9cIiArIGluZm8uc291cmNlRmlsZS5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk1vdmUgU3VjY2VzcyFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk1vdmUgQ2FuY2VsZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQ3JlYXRlQ29uZmlybU1vZGFsIH0gZnJvbSBcInNyYy9tb2RhbC9jcmVhdGUtY29uZmlybS1tb2RhbFwiO1xuaW1wb3J0IHsgTW92ZUluZm8gfSBmcm9tIFwiLi4vbW9kYWwvbW92ZS1pbmZvXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIENyZWF0ZUFjdGlvbiBpbXBsZW1lbnRzIEFjdGlvbiB7XG5cbiAgICBhcHA6IEFwcDtcbiAgICB0YXJnZXRQYXRoOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGFyZ2V0UGF0aDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnRhcmdldFBhdGggPSB0YXJnZXRQYXRoO1xuICAgIH1cblxuICAgIGFjdChyZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXSkge1xuXG4gICAgICAgIGNvbnN0IG1vdmVJbmZvczogTW92ZUluZm9bXSA9IFtdO1xuXG4gICAgICAgIGlmIChyZXN1bHRBcnIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVzdWx0QXJyLmZvckVhY2goZmYgPT4ge1xuICAgICAgICAgICAgICAgIG1vdmVJbmZvcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlRmlsZTogZmYsXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERpcjogdGhpcy50YXJnZXRQYXRoXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBuZXcgQ3JlYXRlQ29uZmlybU1vZGFsKHRoaXMuYXBwLCBtb3ZlSW5mb3MpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IE1vdmVJbmZvIH0gZnJvbSAnc3JjL21vZGFsL21vdmUtaW5mbyc7XG5cbi8qKlxuICogXHUwMEEwXHU1RjM5XHU3QTk3XHU3ODZFXHU4QkE0XHU4OTgxXHU1MjFCXHU1RUZBXHU3Njg0XHU2NTg3XHU0RUY2XG4gKi9cbmV4cG9ydCBjbGFzcyBDcmVhdGVDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgbW92ZUluZm9zOiBNb3ZlSW5mb1tdO1xuICAgIGNvcHlGbGFnOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG1vdmVJbmZvczogTW92ZUluZm9bXSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLm1vdmVJbmZvcyA9IG1vdmVJbmZvcztcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJDb25maXJtIENyZWF0ZT9cIiB9KTtcblxuICAgICAgICB0aGlzLm1vdmVJbmZvcy5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaW5mby50YXJnZXREaXIgKyBcIi9cIiArIGluZm8uc291cmNlRmlsZS5uYW1lIH0pO1xuICAgICAgICB9KVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG4uc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMubW92ZUluZm9zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLm1vdmVJbmZvc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShpbmZvLnRhcmdldERpciArIFwiL1wiICsgaW5mby5zb3VyY2VGaWxlLm5hbWUsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWF0ZSBTdWNjZXNzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYXRlIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cbn0iLCAiaW1wb3J0IEZpbGVDb29rZXJQbHVnaW4gZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IE5vdGljZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU3luY0Zsb21vQ29uZmlybU1vZGFsIH0gZnJvbSBcInNyYy9tb2RhbC9zeW5jLWZsb21vLWNvbmZpcm0tbW9kYWxcIjtcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgU3luY0Zsb21vQWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcblxuICAgIHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBhY3QocmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcbiAgICAgICAgbGV0IGZsb21vQVBJID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZmxvbW9BUEk7XG4gICAgICAgIGlmICghZmxvbW9BUEkgfHwgZmxvbW9BUEkudHJpbSgpID09IFwiXCIpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJQbGVhc2UgY29uZmlnIGZsb21vQVBJIGZpcnN0IVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdWx0QXJyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG5ldyBTeW5jRmxvbW9Db25maXJtTW9kYWwodGhpcy5wbHVnaW4sIHJlc3VsdEFycikub3BlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIEZpbGVzIEZvdW5kIVwiKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiaW1wb3J0IEZpbGVDb29rZXJQbHVnaW4gZnJvbSAnbWFpbic7XG5pbXBvcnQgeyBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBUQWJzdHJhY3RGaWxlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBmZXRjaCBmcm9tICdub2RlLWZldGNoJztcblxuLyoqXG4gKiBcdTAwQTBcdTVGMzlcdTdBOTdcdTc4NkVcdThCQTRcdTg5ODFcdTU0MENcdTZCNjVcdTUyMzBmbG9tb1x1NzY4NFx1NjU4N1x1NEVGNlxuICovXG5leHBvcnQgY2xhc3MgU3luY0Zsb21vQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdO1xuICAgIHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbiwgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcbiAgICAgICAgc3VwZXIocGx1Z2luLmFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnJlc3VsdEFyciA9IHJlc3VsdEFycjtcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJDb25maXJtIFN5bmMgdG8gZmxvbW8/XCIgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMucmVzdWx0QXJyLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIk5vIGZpbGVzIGZvdW5kIVwiIH0pO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2xvc2VcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaW5mby5wYXRoIH0pO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5yZXN1bHRBcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLnJlc3VsdEFycltpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKChpbmZvIGFzIFRGaWxlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1RDgzRFx1REM0N1x1RkUwRiBjb25zdCByZXNwb25zZTogUmVzcG9uc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mbG9tb0FQSSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFN5bmMgdG8gZmxvbW8gRXJyb3IhJHtyZXNwb25zZS50ZXh0fVske3Jlc3BvbnNlLnN0YXR1c31dYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlN5bmMgdG8gZmxvbW8gU3VjY2VzcyFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiU3luYyB0byBmbG9tbyBDYW5jZWxlZCFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd0NhLFFBQUEsVUFBUyxDQUFDLFFBQXNDOztBQUN6RCxVQUFJO0FBQUssZUFBTyxNQUFBLElBQUksUUFBUSxRQUFRLGNBQVUsUUFBQSxPQUFBLFNBQUEsU0FBQSxHQUFBOztBQUN6QyxlQUFPLE9BQU87O0FBSVYsUUFBQSxrQkFBa0IsQ0FBQyxRQUFhLElBQUksUUFBUSxlQUFlLElBQUk7Ozs7Ozs7QUM5QzVFO0FBQUE7QUFBQTtBQUdBLFFBQUksWUFBWSxXQUFZO0FBSTNCLFVBQUksT0FBTyxTQUFTLGFBQWE7QUFBRSxlQUFPO0FBQUE7QUFDMUMsVUFBSSxPQUFPLFdBQVcsYUFBYTtBQUFFLGVBQU87QUFBQTtBQUM1QyxVQUFJLE9BQU8sV0FBVyxhQUFhO0FBQUUsZUFBTztBQUFBO0FBQzVDLFlBQU0sSUFBSSxNQUFNO0FBQUE7QUFHakIsUUFBSSxTQUFTO0FBRWIsWUFBTyxVQUFVLFVBQVUsT0FBTztBQUdsQyxRQUFJLE9BQU8sT0FBTztBQUNqQixjQUFRLFVBQVUsT0FBTyxNQUFNLEtBQUs7QUFBQTtBQUdyQyxZQUFRLFVBQVUsT0FBTztBQUN6QixZQUFRLFVBQVUsT0FBTztBQUN6QixZQUFRLFdBQVcsT0FBTztBQUFBO0FBQUE7OztBQ3hCMUI7QUFBQTtBQUFBO0FBQUEsd0JBQTZFOzs7QUNBN0Usc0JBQTBEO0FBUW5ELHNDQUFnQyw2QkFBNEI7QUFBQSxFQU1sRSxZQUFZLEtBQVUsVUFBb0IsWUFBc0M7QUFDL0UsVUFBTTtBQUNOLFNBQUssV0FBVztBQUNoQixTQUFLLGFBQWE7QUFBQTtBQUFBLEVBSW5CLGVBQWUsT0FBZ0M7QUFDOUMsVUFBTSxnQkFBZ0IsS0FBSyxJQUFJLE1BQU07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
